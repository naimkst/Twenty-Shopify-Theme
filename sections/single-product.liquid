<script>
  window.product = {{ product | json }} || {}
</script>
<script type="application/json">
  {{ product.variants | json }}
</script>

{%- liquid
  assign product_form_id = 'product-form-' | append: section.id
-%}
<section class="shop-single-section product-details section-padding pt-0">
  <div class="container">
    <div class="row">
      <div class="col col-lg-7 col-12">
        <div class="product-single-image">
          <div class="row">
            {% for image in product.images %}
              <div class="col col-lg-6 col-1md-6 col-12">
                <a class="product-popup" href="{{ image.src | image_url: width: 1920 }}">
                  <img
                    src="{{ image.src | image_url: width: 700 }}"
                    width=""
                    height=""
                    alt
                    class="img img-responsive">
                </a>
              </div>
            {% endfor %}
          </div>
        </div>
      </div>
      <div class="col col-lg-5 col-12">
        <div class="product-details">
          <small>STEEL / RED</small>
          <div class="title">
            <h2>{{ product.title }}</h2>
            <span>{{ product.price | money }}</span>
          </div>
          <ul class="rating">
            <li>
              <div
                class="Stars"
                style="--rating: 4.5;"
                aria-label="Rating of this product is 2.3 out of 5."></div>
            </li>
            <li>5.0 (2 Reviews)</li>
          </ul>
          <p>{{ product.description }}</p>


          <div class="tag-wrap">
            {% if product.variants.size > 1 %}
              {% for option in product.options %}
                <h4 data-id="SingleOptionSelector-{{ forloop.index0 }}">
                  {{ option }}
                </h4>
                <ul
                  id="SingleOptionSelector-{{ forloop.index0 }}"
                  class="single-option-selector single-option-selector-product-template product-form__input"
                  data-index="option{{ forloop.index }}"
                  name="id">
                  {% capture option_index %}option{{ forloop.index }}{% endcapture %}
                  {% assign option_values = product.variants | map: option_index | uniq %}

                  {% for i in (0..option_values.size) %}
                    <script>
                      console.log({{ variant_id | json }})
                    </script>
                    {% assign choice = option_values[i] %}
                    {% assign variant_id = product.variants[i].id %}
                    {% capture option_id %}option_{{ choice | handle }}{% endcapture %}
                    <li class="js product-form__input product-form__input--pill">
                      <input
                        id="{{ choice | handle }}"
                        type="radio"
                        class="single-option-selector"
                        name="{{ option | handle }}"
                        form="{{ product_form_id }}"
                        value="{{ variant_id | escape }}">
                      <label for="{{ choice | handle }}">{{ choice }}</label>
                    </li>
                  {% endfor %}

                </ul>
              {% endfor %}
            {% endif %}

          </div>
          <script type="application/json">
            {{ product.variants | json }}
          </script>


          <div class="buy-btn">
            <a href="shop.html" class="theme-btn">ADD TO CART</a>
          </div>

          <div class="features">
            <ul>
              <li>
                <i><img
                    src="{{ 'delivery.svg' | asset_url }}"
                    width=""
                    height=""
                    alt=""></i>Free Shipping</li>
              <li>
                <i><img
                    src="{{ 'quality.svg' | asset_url }}"
                    width=""
                    height=""
                    alt=""></i>2 year warranty</li>
              <li>
                <i><img
                    src="{{ 'box.svg' | asset_url }}"
                    width=""
                    height=""
                    alt=""></i>30 Day Returns</li>
              <li>
                <i><img
                    src="{{ 'payment.svg' | asset_url }}"
                    width=""
                    height=""
                    alt=""></i>Secure Payment</li>
            </ul>
          </div>

          <div class="accordion-section">
            <div class="accordion" id="accordionExample">
              <div class="accordion-item">
                <h3 class="accordion-header" id="headingOne">
                  <button
                    class="accordion-button"
                    type="button"
                    data-bs-toggle="collapse"
                    data-bs-target="#collapseOne"
                    aria-expanded="true"
                    aria-controls="collapseOne">
                    Key Features
                  </button>
                </h3>
                <div
                  id="collapseOne"
                  class="accordion-collapse collapse"
                  aria-labelledby="headingOne"
                  data-bs-parent="#accordionExample">
                  <div class="accordion-body">
                    <p>Meet your new chilly weather staple. The ReWool® Oversized Shirt                                                                                                                                                                                                                                                                                                                                                                                                                                              
                                                    Jacket has all the classic shirt detailing—collar, cuffs with
                                                    buttons, and a shirttail hem,</p>
                  </div>
                </div>
              </div>
              <div class="accordion-item">
                <h3 class="accordion-header" id="headingTwo">
                  <button
                    class="accordion-button collapsed"
                    type="button"
                    data-bs-toggle="collapse"
                    data-bs-target="#collapseTwo"
                    aria-expanded="false"
                    aria-controls="collapseTwo">
                    Dimensions
                  </button>
                </h3>
                <div
                  id="collapseTwo"
                  class="accordion-collapse collapse"
                  aria-labelledby="headingTwo"
                  data-bs-parent="#accordionExample">
                  <div class="accordion-body">
                    <p>Meet your new chilly weather staple. The ReWool® Oversized Shirt                                                                                                                                                                                                                                                                                                                                                                                                                                              
                                                    Jacket has all the classic shirt detailing—collar, cuffs with
                                                    buttons, and a shirttail hem,</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      <!-- end product details -->
      </div>
    <!-- end col -->
    </div>
  <!-- end row -->
  </div>
<!-- end of container -->
</section>


<script>
  // Define the onVariantChange function
  function onVariantChange() {
  // Find the selected variant
  const selectedVariant = document.querySelector('.single-option-selector input[type="radio"]:checked');

  // If a variant is selected
  if (selectedVariant) {
    // Get the variant ID
    const variantId = selectedVariant.value;

    // Get the current URL
    let currentUrl = window.location.href;

    // If the current URL contains a variant parameter
    if (currentUrl.includes('variant=')) {
      // Replace the existing variant ID with the new one
      currentUrl = currentUrl.replace(/variant=\d+/, 'variant=' + variantId);
    } else {
      // If no variant parameter exists, add it to the URL
      currentUrl += (currentUrl.includes('?') ? '&' : '?') + 'variant=' + variantId;
    }

    // Update the URL
    window.history.pushState({}, '', currentUrl);
  }
  }

  document.addEventListener("DOMContentLoaded", function() {
  // Find all radio buttons for the variant options
  const radioButtons = document.querySelectorAll('.single-option-selector input[type="radio"]');

  // Add event listener to each radio button
  radioButtons.forEach(function(radioButton) {
    radioButton.addEventListener("change", function() {
      // Call the onVariantChange function when a radio button selection changes
      onVariantChange();
    });
  });
  });

</script>